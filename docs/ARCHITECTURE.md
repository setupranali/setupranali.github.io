# SetuPranali - Universal BI Connector Architecture

## ğŸ“‹ Overview

**SetuPranali** is a **Semantic Analytics Layer** that acts as a universal connector between various data sources and BI tools. It provides a unified semantic layer that abstracts the complexity of underlying data sources, enabling business users to query data using business terminology.

---

## ğŸ—ï¸ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              BI TOOLS (Consumers)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚Power BI â”‚  â”‚ Tableau â”‚  â”‚ Grafana â”‚  â”‚ Metabaseâ”‚  â”‚  Excel  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜           â”‚
â”‚       â”‚            â”‚            â”‚            â”‚            â”‚                 â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                              â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SETUPRANALI WEB UI (React)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Dashboard    â”‚  â”‚    Datasets    â”‚  â”‚      Modeling Studio           â”‚ â”‚
â”‚  â”‚   - Health     â”‚  â”‚  - Semantic    â”‚  â”‚  - Schema Browser              â”‚ â”‚
â”‚  â”‚   - Stats      â”‚  â”‚  - Catalog     â”‚  â”‚  - ERD Canvas                  â”‚ â”‚
â”‚  â”‚   - Usage      â”‚  â”‚  - Sources     â”‚  â”‚  - Semantic Model Builder      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  - Query Workbench             â”‚ â”‚
â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Contract Editorâ”‚  â”‚ Query Playgroundâ”‚ â”‚       Sources Manager          â”‚ â”‚
â”‚  â”‚  - YAML Editor â”‚  â”‚  - SQL Editor  â”‚  â”‚  - Connection Setup            â”‚ â”‚
â”‚  â”‚  - Validation  â”‚  â”‚  - Results     â”‚  â”‚  - Schema Introspection        â”‚ â”‚
â”‚  â”‚  - Sync        â”‚  â”‚  - Charts      â”‚  â”‚  - Test Connection             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ REST API / GraphQL / OData
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SETUPRANALI BACKEND (FastAPI)                          â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                          API Layer                                     â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ REST API â”‚  â”‚ GraphQL  â”‚  â”‚  OData   â”‚  â”‚ JSON:API â”‚  â”‚Streaming â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     Semantic Layer (Core)                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  ERD Manager    â”‚  â”‚ Semantic Model  â”‚  â”‚    Query Planner        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Tables       â”‚  â”‚ - Dimensions    â”‚  â”‚  - SQL Generation       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Relationshipsâ”‚  â”‚ - Measures      â”‚  â”‚  - Join Resolution      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Joins        â”‚  â”‚ - Calc Fields   â”‚  â”‚  - Dialect Adaptation   â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  Catalog        â”‚  â”‚ Schema Introspectâ”‚ â”‚   Expression Validator  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - YAML Parser  â”‚  â”‚ - Table Discoveryâ”‚ â”‚  - Syntax Check         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  - Dataset Defs â”‚  â”‚ - Column Info   â”‚  â”‚  - Reference Resolution â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Cross-Cutting Concerns                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Security â”‚  â”‚  Cache   â”‚  â”‚Rate Limitâ”‚  â”‚ Logging  â”‚  â”‚   RLS    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ API Keys â”‚  â”‚  Redis   â”‚  â”‚Per-Key   â”‚  â”‚Structuredâ”‚  â”‚Row-Level â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ OAuth    â”‚  â”‚  Memory  â”‚  â”‚Throttle  â”‚  â”‚ Tracing  â”‚  â”‚Security  â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      Adapter Layer                                     â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚                     Base Adapter Interface                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - execute(sql, params) â†’ QueryResult                            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - get_schemas() â†’ List[Schema]                                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - get_tables(schema) â†’ List[Table]                              â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - get_columns(schema, table) â†’ List[Column]                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - test_connection() â†’ ConnectionResult                          â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚  â”‚  â”‚PostgreSQLâ”‚MySQL   â”‚StarRocksâ”‚ClickHseâ”‚Snowflakeâ”‚BigQueryâ”‚         â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚  â”‚  â”‚ DuckDB â”‚ Redshiftâ”‚Databricksâ”‚ Trino  â”‚SQLServerâ”‚ Oracle â”‚         â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     Persistence Layer                                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚ â”‚
â”‚  â”‚  â”‚ sources.db  â”‚  â”‚   erd.db    â”‚  â”‚ semantic.db â”‚                    â”‚ â”‚
â”‚  â”‚  â”‚ (SQLite)    â”‚  â”‚  (SQLite)   â”‚  â”‚  (SQLite)   â”‚                    â”‚ â”‚
â”‚  â”‚  â”‚ - Sources   â”‚  â”‚ - ERD Modelsâ”‚  â”‚ - Semantic  â”‚                    â”‚ â”‚
â”‚  â”‚  â”‚ - Configs   â”‚  â”‚ - Tables    â”‚  â”‚   Models    â”‚                    â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚ - Relations â”‚  â”‚ - Dims/Meas â”‚                    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ Native Database Protocols
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DATA SOURCES (Databases)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚PostgreSQLâ”‚ â”‚  MySQL  â”‚  â”‚StarRocksâ”‚  â”‚ClickHouseâ”‚ â”‚Snowflakeâ”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚BigQuery â”‚  â”‚ DuckDB  â”‚  â”‚ Redshiftâ”‚  â”‚  Trino  â”‚  â”‚Databricksâ”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© Component Details

### 1. Web UI (Frontend - React + TypeScript)

| Component | Path | Description |
|-----------|------|-------------|
| **Dashboard** | `/` | System health, stats, quick access |
| **Sources** | `/sources` | Manage database connections |
| **Datasets** | `/datasets` | View semantic models, catalog datasets |
| **Modeling Studio** | `/modeling` | Visual ERD & semantic model builder |
| **Contract Editor** | `/contracts` | YAML contract editing with bi-directional sync |
| **Query Playground** | `/playground` | Ad-hoc SQL query interface |
| **Semantic Model Detail** | `/models/:id` | Detailed view of semantic models |

**Key Libraries:**
- React 18 + TypeScript
- Zustand (state management)
- TanStack Query (data fetching)
- React Flow (ERD visualization)
- Monaco Editor (code editing)
- Tailwind CSS (styling)
- React Resizable Panels (layout)
- Recharts (visualizations)

### 2. Backend API (FastAPI - Python)

| Module | Path | Description |
|--------|------|-------------|
| **main.py** | `/app/main.py` | Application entry, routes registration |
| **modeling/** | `/app/modeling/` | ERD, Semantic Model, Query Planning |
| **adapters/** | `/app/adapters/` | Database-specific implementations |
| **catalog.py** | `/app/catalog.py` | YAML catalog parser |
| **sources.py** | `/app/sources.py` | Source connection management |
| **security.py** | `/app/security.py` | Authentication, API keys |

### 3. Database Adapters

All adapters implement the `BaseAdapter` interface:

```python
class BaseAdapter(ABC):
    @abstractmethod
    def execute(self, sql: str, params: list = None) -> QueryResult
    
    @abstractmethod
    def get_schemas(self) -> List[SchemaInfo]
    
    @abstractmethod
    def get_tables(self, schema: str) -> List[TableInfo]
    
    @abstractmethod
    def get_columns(self, schema: str, table: str) -> List[ColumnInfo]
    
    @abstractmethod
    def test_connection(self) -> ConnectionResult
```

**Supported Databases:**
| Database | Adapter | Quote Char | Status |
|----------|---------|------------|--------|
| PostgreSQL | `postgres_adapter.py` | `"` | âœ… |
| MySQL | `mysql_adapter.py` | `` ` `` | âœ… |
| StarRocks | `mysql_adapter.py` | `` ` `` | âœ… |
| ClickHouse | `clickhouse_adapter.py` | `` ` `` | âœ… |
| Snowflake | `snowflake_adapter.py` | `"` | âœ… |
| BigQuery | `bigquery_adapter.py` | `` ` `` | âœ… |
| DuckDB | `duckdb_adapter.py` | `"` | âœ… |
| Redshift | `redshift_adapter.py` | `"` | âœ… |
| Trino | `trino_adapter.py` | `"` | âœ… |
| Databricks | `databricks_adapter.py` | `` ` `` | âœ… |
| SQL Server | `sqlserver_adapter.py` | `[` | âœ… |
| Oracle | `oracle_adapter.py` | `"` | âœ… |

---

## ğŸ“Š Data Models

### ERD Model
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ERD Model                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id: string                                       â”‚
â”‚ name: string                                     â”‚
â”‚ sourceId: string (FK â†’ Source)                   â”‚
â”‚ description?: string                             â”‚
â”‚ nodes: TableNode[]                               â”‚
â”‚ edges: RelationshipEdge[]                        â”‚
â”‚ createdAt: datetime                              â”‚
â”‚ updatedAt: datetime                              â”‚
â”‚ version: number                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚
         â”‚                    â”‚
         â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   TableNode     â”‚    â”‚   RelationshipEdge      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id: string      â”‚    â”‚ id: string              â”‚
â”‚ schemaName      â”‚    â”‚ sourceNodeId            â”‚
â”‚ tableName       â”‚    â”‚ sourceColumn            â”‚
â”‚ fullName        â”‚    â”‚ targetNodeId            â”‚
â”‚ position: {x,y} â”‚    â”‚ targetColumn            â”‚
â”‚ columns[]       â”‚    â”‚ cardinality: 1:1|1:N|N:Nâ”‚
â”‚ isCollapsed     â”‚    â”‚ joinType: inner|left... â”‚
â”‚ isVisible       â”‚    â”‚ isActive                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Semantic Model
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Semantic Model                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id: string                                       â”‚
â”‚ name: string                                     â”‚
â”‚ sourceId: string (FK â†’ Source)                   â”‚
â”‚ erdModelId?: string (FK â†’ ERDModel)              â”‚
â”‚ dimensions: Dimension[]                          â”‚
â”‚ measures: Measure[]                              â”‚
â”‚ calculatedFields: CalculatedField[]              â”‚
â”‚ timeIntelligence: TimeIntelligence[]             â”‚
â”‚ createdAt: datetime                              â”‚
â”‚ updatedAt: datetime                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                â”‚
         â–¼                    â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Dimension     â”‚  â”‚    Measure      â”‚  â”‚ CalculatedField â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id: string      â”‚  â”‚ id: string      â”‚  â”‚ id: string      â”‚
â”‚ name: string    â”‚  â”‚ name: string    â”‚  â”‚ name: string    â”‚
â”‚ sourceTable     â”‚  â”‚ expression      â”‚  â”‚ expression      â”‚
â”‚ sourceColumn    â”‚  â”‚ aggregation     â”‚  â”‚ resultType      â”‚
â”‚ dimensionType:  â”‚  â”‚ sourceTable?    â”‚  â”‚ referencedFieldsâ”‚
â”‚  categorical    â”‚  â”‚ formatString    â”‚  â”‚ formatString    â”‚
â”‚  time           â”‚  â”‚ isAdditive      â”‚  â”‚ isVisible       â”‚
â”‚  geo            â”‚  â”‚ dependsOn[]     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  hierarchical   â”‚  â”‚ filters[]       â”‚
â”‚ hierarchyLevel  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ synonyms[]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Process Flows

### Flow 1: Data Source Connection

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚â”€â”€â”€â”€â–¶â”‚ Web UI  â”‚â”€â”€â”€â”€â–¶â”‚  Backend    â”‚â”€â”€â”€â”€â–¶â”‚ Database â”‚
â”‚         â”‚     â”‚ Sources â”‚     â”‚  API        â”‚     â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚               â”‚                 â”‚                  â”‚
     â”‚ 1. Enter      â”‚                 â”‚                  â”‚
     â”‚ connection    â”‚ 2. POST         â”‚                  â”‚
     â”‚ details       â”‚ /v1/sources     â”‚                  â”‚
     â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                  â”‚
     â”‚               â”‚                 â”‚ 3. Adapter       â”‚
     â”‚               â”‚                 â”‚ Factory          â”‚
     â”‚               â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚
     â”‚               â”‚                 â”‚                  â”‚
     â”‚               â”‚                 â”‚ 4. Test          â”‚
     â”‚               â”‚                 â”‚ Connection       â”‚
     â”‚               â”‚                 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚               â”‚                 â”‚                  â”‚
     â”‚               â”‚                 â”‚ 5. Encrypt       â”‚
     â”‚               â”‚                 â”‚ credentials      â”‚
     â”‚               â”‚                 â”‚                  â”‚
     â”‚               â”‚                 â”‚ 6. Store in      â”‚
     â”‚               â”‚                 â”‚ sources.db       â”‚
     â”‚               â”‚ 7. Success      â”‚                  â”‚
     â”‚               â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
     â”‚ 8. Show       â”‚                 â”‚                  â”‚
     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚                  â”‚
```

### Flow 2: ERD Model Creation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚â”€â”€â”€â”€â–¶â”‚ Modeling Studio â”‚â”€â”€â”€â”€â–¶â”‚  Backend    â”‚â”€â”€â”€â”€â–¶â”‚ Database â”‚
â”‚         â”‚     â”‚ ERD Canvas      â”‚     â”‚  API        â”‚     â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                  â”‚                      â”‚                  â”‚
     â”‚ 1. Select        â”‚                      â”‚                  â”‚
     â”‚ source           â”‚ 2. GET schemas       â”‚                  â”‚
     â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                  â”‚
     â”‚                  â”‚                      â”‚ 3. Introspect    â”‚
     â”‚                  â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                  â”‚                      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
     â”‚                  â”‚                      â”‚                  â”‚
     â”‚ 4. Drag table    â”‚                      â”‚                  â”‚
     â”‚ to canvas        â”‚ 5. POST /erd/nodes   â”‚                  â”‚
     â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                  â”‚
     â”‚                  â”‚                      â”‚ 6. Store node    â”‚
     â”‚                  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
     â”‚                  â”‚                      â”‚                  â”‚
     â”‚ 7. Draw          â”‚ 8. POST /erd/edges   â”‚                  â”‚
     â”‚ relationship     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                  â”‚
     â”‚                  â”‚                      â”‚ 9. Store edge    â”‚
     â”‚                  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
     â”‚                  â”‚                      â”‚                  â”‚
     â”‚ 10. Save         â”‚ 11. PUT /erd/{id}    â”‚                  â”‚
     â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                  â”‚
     â”‚                  â”‚                      â”‚ 12. Persist      â”‚
     â”‚                  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    to erd.db     â”‚
```

### Flow 3: Semantic Model Creation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚â”€â”€â”€â”€â–¶â”‚ Modeling Studio â”‚â”€â”€â”€â”€â–¶â”‚  Backend    â”‚
â”‚         â”‚     â”‚ Semantic Panel  â”‚     â”‚  API        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                  â”‚                      â”‚
     â”‚ 1. Create new    â”‚ 2. POST              â”‚
     â”‚ semantic model   â”‚ /semantic            â”‚
     â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                  â”‚                      â”‚ 3. Initialize
     â”‚                  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ empty model
     â”‚                  â”‚                      â”‚
     â”‚ 4. Add dimension â”‚                      â”‚
     â”‚ (name, table,    â”‚ 5. POST              â”‚
     â”‚  column, type)   â”‚ /semantic/{id}/dims  â”‚
     â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                  â”‚                      â”‚ 6. Validate:
     â”‚                  â”‚                      â”‚ - Table exists?
     â”‚                  â”‚                      â”‚ - Column exists?
     â”‚                  â”‚                      â”‚ - Type compatible?
     â”‚                  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                  â”‚                      â”‚
     â”‚ 7. Add measure   â”‚                      â”‚
     â”‚ (name, expr,     â”‚ 8. POST              â”‚
     â”‚  aggregation)    â”‚ /semantic/{id}/meas  â”‚
     â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                  â”‚                      â”‚ 9. Validate expr
     â”‚                  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                  â”‚                      â”‚
     â”‚ 10. Save         â”‚ 11. PUT              â”‚
     â”‚                  â”‚ /semantic/{id}       â”‚
     â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ 12. Persist to
     â”‚                  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ semantic.db
```

### Flow 4: Semantic Query Execution

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚â”€â”€â”€â”€â–¶â”‚ Query Workbench â”‚â”€â”€â”€â”€â–¶â”‚  Backend    â”‚â”€â”€â”€â”€â–¶â”‚ Database â”‚
â”‚         â”‚     â”‚                 â”‚     â”‚  API        â”‚     â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                  â”‚                      â”‚                  â”‚
     â”‚ 1. Select        â”‚                      â”‚                  â”‚
     â”‚ dimensions &     â”‚                      â”‚                  â”‚
     â”‚ measures         â”‚                      â”‚                  â”‚
     â”‚                  â”‚                      â”‚                  â”‚
     â”‚ 2. Click         â”‚ 3. POST              â”‚                  â”‚
     â”‚ Run Query        â”‚ /query/semantic      â”‚                  â”‚
     â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                  â”‚
     â”‚                  â”‚ {                    â”‚                  â”‚
     â”‚                  â”‚   erdModelId,        â”‚                  â”‚
     â”‚                  â”‚   semanticModelId,   â”‚                  â”‚
     â”‚                  â”‚   dimensions[],      â”‚                  â”‚
     â”‚                  â”‚   measures[]         â”‚                  â”‚
     â”‚                  â”‚ }                    â”‚                  â”‚
     â”‚                  â”‚                      â”‚                  â”‚
     â”‚                  â”‚                      â”‚ 4. Load ERD modelâ”‚
     â”‚                  â”‚                      â”‚ 5. Load Semantic â”‚
     â”‚                  â”‚                      â”‚    model         â”‚
     â”‚                  â”‚                      â”‚                  â”‚
     â”‚                  â”‚                      â”‚ 6. QueryPlanner  â”‚
     â”‚                  â”‚                      â”‚ - Resolve dims   â”‚
     â”‚                  â”‚                      â”‚ - Resolve meas   â”‚
     â”‚                  â”‚                      â”‚ - Build JOINs    â”‚
     â”‚                  â”‚                      â”‚ - Generate SQL   â”‚
     â”‚                  â”‚                      â”‚                  â”‚
     â”‚                  â”‚                      â”‚ 7. Get source    â”‚
     â”‚                  â”‚                      â”‚    type (MySQL?) â”‚
     â”‚                  â”‚                      â”‚ 8. Set quote_charâ”‚
     â”‚                  â”‚                      â”‚                  â”‚
     â”‚                  â”‚                      â”‚ 9. Execute SQL   â”‚
     â”‚                  â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                  â”‚                      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                  â”‚                      â”‚                  â”‚
     â”‚                  â”‚ 10. Return results   â”‚                  â”‚
     â”‚                  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
     â”‚                  â”‚ {                    â”‚                  â”‚
     â”‚                  â”‚   rows,              â”‚                  â”‚
     â”‚                  â”‚   columns,           â”‚                  â”‚
     â”‚                  â”‚   sql,               â”‚                  â”‚
     â”‚                  â”‚   executionTimeMs    â”‚                  â”‚
     â”‚                  â”‚ }                    â”‚                  â”‚
     â”‚ 11. Display      â”‚                      â”‚                  â”‚
     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚                  â”‚
```

### Flow 5: Contract Bi-directional Sync

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BI-DIRECTIONAL SYNC                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Direction A: Semantic Model â†’ Contract (YAML)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Modeling    â”‚â”€â”€â”€â”€â–¶â”‚ Contract Editor â”‚â”€â”€â”€â”€â–¶â”‚  Backend    â”‚
â”‚ Studio      â”‚     â”‚ "Pull from Model"â”‚     â”‚  API        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                      â”‚                      â”‚
     â”‚ 1. Create/Edit       â”‚                      â”‚
     â”‚ Semantic Model       â”‚                      â”‚
     â”‚                      â”‚                      â”‚
     â”‚ 2. Save model        â”‚                      â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                      â”‚
     â”‚                      â”‚ 3. Click "Pull      â”‚
     â”‚                      â”‚ from Model"          â”‚
     â”‚                      â”‚                      â”‚
     â”‚                      â”‚ 4. GET               â”‚
     â”‚                      â”‚ /semantic/{id}/yaml  â”‚
     â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                      â”‚                      â”‚ 5. Generate YAML
     â”‚                      â”‚                      â”‚    from model
     â”‚                      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                      â”‚                      â”‚
     â”‚                      â”‚ 6. Display YAML      â”‚
     â”‚                      â”‚    in editor         â”‚


Direction B: Contract (YAML) â†’ Semantic Model
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Contract Editor â”‚â”€â”€â”€â”€â–¶â”‚ Contract Editor â”‚â”€â”€â”€â”€â–¶â”‚  Backend    â”‚
â”‚ YAML Editor     â”‚     â”‚ "Push to Model" â”‚     â”‚  API        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                      â”‚                      â”‚
     â”‚ 1. Edit YAML         â”‚                      â”‚
     â”‚ contract manually    â”‚                      â”‚
     â”‚                      â”‚                      â”‚
     â”‚ 2. Click "Push       â”‚                      â”‚
     â”‚ to Model"            â”‚                      â”‚
     â”‚                      â”‚ 3. PUT               â”‚
     â”‚                      â”‚ /semantic/{id}/from-yaml
     â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                      â”‚ { content: yaml }    â”‚
     â”‚                      â”‚                      â”‚
     â”‚                      â”‚                      â”‚ 4. Parse YAML
     â”‚                      â”‚                      â”‚ 5. Update model:
     â”‚                      â”‚                      â”‚    - dimensions
     â”‚                      â”‚                      â”‚    - measures
     â”‚                      â”‚                      â”‚    - calc fields
     â”‚                      â”‚                      â”‚
     â”‚                      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ 6. Return updated
     â”‚                      â”‚                      â”‚    model
     â”‚                      â”‚                      â”‚
     â”‚ 7. Modeling Studio   â”‚                      â”‚
     â”‚ reflects changes     â”‚                      â”‚
     â”‚ after refresh        â”‚                      â”‚
```

---

## ğŸ”Œ API Endpoints

### Source Management
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/v1/sources` | List all sources |
| POST | `/v1/sources` | Register new source |
| GET | `/v1/sources/{id}` | Get source details |
| DELETE | `/v1/sources/{id}` | Delete source |
| POST | `/v1/sources/{id}/test` | Test connection |

### Schema Introspection
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/v1/modeling/sources/{id}/schemas` | List schemas |
| GET | `/v1/modeling/sources/{id}/schemas/{schema}/tables` | List tables |
| GET | `/v1/modeling/sources/{id}/schemas/{schema}/tables/{table}/columns` | List columns |

### ERD Management
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/v1/modeling/erd` | List ERD models |
| POST | `/v1/modeling/erd` | Create ERD model |
| GET | `/v1/modeling/erd/{id}` | Get ERD model |
| PUT | `/v1/modeling/erd/{id}` | Update ERD model |
| DELETE | `/v1/modeling/erd/{id}` | Delete ERD model |
| POST | `/v1/modeling/erd/{id}/nodes` | Add table node |
| POST | `/v1/modeling/erd/{id}/edges` | Add relationship |

### Semantic Model Management
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/v1/modeling/semantic` | List semantic models |
| POST | `/v1/modeling/semantic` | Create semantic model |
| GET | `/v1/modeling/semantic/{id}` | Get semantic model |
| PUT | `/v1/modeling/semantic/{id}` | Update semantic model |
| DELETE | `/v1/modeling/semantic/{id}` | Delete semantic model |
| POST | `/v1/modeling/semantic/{id}/dimensions` | Add dimension |
| PUT | `/v1/modeling/semantic/{id}/dimensions/{dimId}` | Update dimension |
| POST | `/v1/modeling/semantic/{id}/measures` | Add measure |
| PUT | `/v1/modeling/semantic/{id}/measures/{measId}` | Update measure |
| GET | `/v1/modeling/semantic/{id}/yaml` | Generate YAML |
| PUT | `/v1/modeling/semantic/{id}/from-yaml` | Update from YAML |

### Query Execution
| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/v1/modeling/query/semantic` | Execute semantic query |
| POST | `/v1/modeling/query/sql` | Execute raw SQL |
| POST | `/v1/modeling/query/explain` | Explain query |
| POST | `/v1/modeling/query/validate-expression` | Validate expression |

---

## ğŸ—„ï¸ Data Persistence

### SQLite Databases (Development)
```
app/db/
â”œâ”€â”€ sources.db      # Data source connections
â”œâ”€â”€ erd.db          # ERD models (tables, relationships)
â””â”€â”€ semantic.db     # Semantic models (dims, measures, calcs)
```

### Redis (Production - Caching)
- Query result caching
- Session management
- Rate limiting counters

---

## ğŸ” Security Features

| Feature | Description |
|---------|-------------|
| **API Key Auth** | Per-key authentication with lifecycle management |
| **Row-Level Security** | Automatic tenant isolation based on API key |
| **Encryption** | Credentials encrypted at rest |
| **Rate Limiting** | Per-API-key request throttling |
| **CORS** | Configurable cross-origin policy |
| **OAuth 2.0** | External identity provider integration |
| **SAML** | Enterprise SSO support |

---

## ğŸš€ Deployment Options

| Option | Description |
|--------|-------------|
| **Docker** | Single container with all components |
| **Docker Compose** | Multi-container with Redis |
| **Kubernetes** | Helm chart available |
| **Cloud Native** | AWS, GCP, Azure deployment guides |

---

## ğŸ“ˆ Technology Stack Summary

| Layer | Technology |
|-------|------------|
| **Frontend** | React 18, TypeScript, Tailwind CSS, Zustand |
| **Backend** | Python 3.11+, FastAPI, Pydantic |
| **Database** | SQLite (dev), PostgreSQL (prod) |
| **Cache** | Redis |
| **Visualization** | React Flow, Recharts, Monaco Editor |
| **API Protocols** | REST, GraphQL, OData |
| **Documentation** | MkDocs Material |

---

## ğŸ¯ Key Design Principles

1. **Database Agnostic**: Adapters abstract database-specific SQL dialects
2. **Semantic Abstraction**: Business users query using dimensions/measures, not SQL
3. **Visual Modeling**: ERD canvas for intuitive relationship management
4. **Bi-directional Sync**: YAML contracts â†” Semantic models stay in sync
5. **Multi-tenant**: Row-level security isolates tenant data
6. **Extensible**: Plugin architecture for new adapters and features
7. **API-First**: Multiple API protocols for different BI tool integrations

---

*Document generated: January 2026*
*Version: 1.0*
